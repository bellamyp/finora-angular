<div class="card p-4 shadow-lg rounded-4 mx-auto my-4" style="max-width: 800px;">
  <h2 class="text-center mb-4 text-primary">Edit Transaction Group</h2>

  <form #groupForm="ngForm">

    <!-- GROUP INFO -->
    <h5 class="mb-3 text-secondary">Group Information</h5>
    <div class="row g-3">
      <div class="col-md-4">
        <label class="form-label fw-semibold">Date</label>
        <input type="date" class="form-control" [(ngModel)]="groupDate" name="groupDate">
      </div>

      <div class="col-md-4">
        <label class="form-label fw-semibold">Brand</label>
        <select class="form-select" [(ngModel)]="selectedBrandId" name="brandId">
          <option [ngValue]="undefined">-- Select Brand --</option>
          <option *ngFor="let b of brands" [ngValue]="b.id">{{ b.name }} ({{ b.location }})</option>
        </select>
      </div>

      <div class="col-md-4">
        <label class="form-label fw-semibold">Transaction Type</label>
        <select class="form-select" [(ngModel)]="typeId" name="typeId">
          <option [ngValue]="undefined">-- Select Type --</option>
          <option *ngFor="let t of transactionTypes" [ngValue]="t.id">{{ t.name }}</option>
        </select>
      </div>
    </div>

    <hr class="my-4">

    <!-- TRANSACTION ROWS -->
    <h5 class="mb-3 text-secondary">Transactions</h5>
    <div class="table-responsive">
      <table class="table table-bordered align-middle">
        <thead class="table-light">
        <tr>
          <th style="width: 15%">Amount</th>
          <th style="width: 20%">Bank</th>
          <th>Note</th>
          <th style="width: 80px"></th>
        </tr>
        </thead>
        <tbody>
        <tr *ngFor="let t of transactions; let i = index">
          <td>
            <input type="number" class="form-control" [(ngModel)]="t.amount" name="amount{{i}}" step="0.01">
          </td>
          <td>
            <select class="form-select" [(ngModel)]="t.bankId" name="bankId{{i}}">
              <option [ngValue]="undefined">-- Bank --</option>
              <option *ngFor="let b of banks" [ngValue]="b.id">{{ b.name }}</option>
            </select>
          </td>
          <td>
            <input type="text" class="form-control" [(ngModel)]="t.notes" name="notes{{i}}">
          </td>
          <td class="text-center">
            <button type="button" class="btn btn-outline-danger btn-sm" (click)="removeTransaction(i)">
              <i class="bi bi-trash"></i>
            </button>
          </td>
        </tr>
        </tbody>
      </table>
    </div>

    <div class="d-flex justify-content-end mb-3">
      <button type="button" class="btn btn-outline-primary" (click)="addTransaction()">+ Add Transaction</button>
    </div>

    <button type="button" class="btn btn-success w-100 mt-3" (click)="saveChanges()">Save Changes</button>
  </form>
</div>
