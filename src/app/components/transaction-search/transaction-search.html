<div class="container py-4">

  <h2 class="mb-4 fw-bold text-primary">Search Transactions</h2>

  <!-- SEARCH FORM -->
  <form [formGroup]="searchForm" (ngSubmit)="onSearch()" class="search-card">

    <div class="row g-3">

      <!-- Date Range -->
      <div class="col-md-3">
        <label class="form-label">Start Date</label>
        <input type="date" formControlName="startDate" class="form-control" />
      </div>

      <div class="col-md-3">
        <label class="form-label">End Date</label>
        <input type="date" formControlName="endDate" class="form-control" />
      </div>

      <!-- Amount Range -->
      <div class="col-md-3">
        <label class="form-label">Min Amount</label>
        <input type="number" step="0.01" formControlName="minAmount" class="form-control" />
        <small class="text-muted">* Can be negative (e.g., -50.00)</small>
      </div>

      <div class="col-md-3">
        <label class="form-label">Max Amount</label>
        <input type="number" step="0.01" formControlName="maxAmount" class="form-control" />
      </div>

      <!-- Bank -->
      <div class="col-md-4">
        <label class="form-label">Bank</label>
        <input type="text" formControlName="bankId" class="form-control" placeholder="Bank ID or name" />
      </div>

      <!-- Brand -->
      <div class="col-md-4">
        <label class="form-label">Brand</label>
        <input type="text" formControlName="brandId" class="form-control" placeholder="Brand ID or name" />
      </div>

      <!-- Type -->
      <div class="col-md-4">
        <label class="form-label">Type</label>
        <input type="text" formControlName="typeId" class="form-control" placeholder="Type ID" />
      </div>

      <!-- Keyword -->
      <div class="col-12">
        <label class="form-label">Notes contains</label>
        <input type="text" formControlName="keyword" class="form-control" placeholder="Search notes..." />
      </div>

    </div>

    <button class="btn btn-primary mt-3 px-4">Search</button>

  </form>


  <!-- RESULTS TABLE -->
  <div class="mt-5" *ngIf="searched">

    <h4 class="fw-bold mb-3">Results ({{ results.length }})</h4>

    <!-- No results -->
    <div *ngIf="results.length === 0" class="text-muted fs-5">
      <i class="bi bi-search"></i> No transactions found.
    </div>

    <!-- Results Table -->
    <table *ngIf="results.length > 0" class="table table-striped table-bordered">

      <thead class="table-light">
      <tr>
        <th>ID</th>
        <th>Date</th>
        <th>Amount</th>
        <th>Notes</th>
        <th>Bank</th>
        <th>Brand</th>
      </tr>
      </thead>

      <tbody>
      <tr *ngFor="let t of results">
        <td>{{ t.id }}</td>
        <td>{{ t.date }}</td>
        <td [ngClass]="{'text-danger': t.amount < 0}">
          ${{ t.amount }}
        </td>
        <td>{{ t.notes }}</td>
        <td>{{ t.bankName }}</td>
        <td>{{ t.brandName }}</td>
      </tr>
      </tbody>

    </table>

  </div>

</div>
