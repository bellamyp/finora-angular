<div class="container py-5" *ngIf="!loading">
  <ng-container *ngIf="bank; else errorTpl">

    <h2 class="text-center mb-5 fw-bold text-primary">Bank Details</h2>

    <div class="card rounded-5 shadow p-4 mb-4 bank-card">

      <!-- Bank Info -->
      <div class="row g-4">
        <div class="col-md-6">
          <p class="detail-line"><strong>ID: </strong> <span class="text-muted">{{ bank!.id }}</span></p>
          <p class="detail-line"><strong>Name: </strong> <span class="text-muted">{{ bank!.name }}</span></p>
          <p class="detail-line"><strong>Type: </strong>
            <span class="badge rounded-pill bg-info text-dark">{{ bank!.type }}</span>
          </p>
        </div>
        <div class="col-md-6">
          <p class="detail-line"><strong>Email: </strong> <span class="text-muted">{{ bank!.email }}</span></p>

          <p class="detail-line">
            <strong>Pending Balance: </strong>
            <span class="pending-balance">
              ${{ bank!.pendingBalance ?? 0 | number:'1.2-2' }}
            </span>
          </p>

          <p class="detail-line">
            <strong>Posted Balance: </strong>
            <span class="posted-balance">
              ${{ bank!.postedBalance ?? 0 | number:'1.2-2' }}
            </span>
          </p>
        </div>
      </div>

      <hr class="my-4">

      <!-- Action Buttons -->
      <div class="d-flex flex-wrap justify-content-center gap-3 mb-4">
        <button class="btn btn-secondary btn-lg btn-hover" (click)="goToMainMenu()">
          <i class="bi bi-house-door-fill me-2"></i>Main Menu
        </button>
        <button class="btn btn-primary btn-lg btn-hover" (click)="goToBankList()">
          <i class="bi bi-card-list me-2"></i>List All Banks
        </button>
        <button class="btn btn-warning btn-lg btn-hover" (click)="editBank()">
          <i class="bi bi-pencil-fill me-2"></i>Edit This Bank
        </button>
      </div>

      <!-- Daily Balances Table (inside same card) -->
      <h3 class="text-center mb-3 text-primary">Daily Balance (Last 30 Days)</h3>

      <div *ngIf="dailyBalances.length > 0; else noBalancesTpl" class="daily-balance-table">
        <table class="table table-striped table-bordered align-middle text-center">
          <thead class="table-light">
          <tr>
            <th>Date</th>
            <th>Balance ($)</th>
          </tr>
          </thead>
          <tbody>
          <tr *ngFor="let item of dailyBalances" class="balance-row">
            <td>{{ item.date }}</td>
            <td>${{ item.balance | number:'1.2-2' }}</td>
          </tr>
          </tbody>
        </table>
      </div>

      <ng-template #noBalancesTpl>
        <div class="alert alert-info text-center">
          No daily balance data available.
        </div>
      </ng-template>

    </div>
  </ng-container>
</div>

<ng-template #errorTpl>
  <div class="alert alert-danger text-center fw-bold py-3" role="alert">
    <i class="bi bi-exclamation-triangle-fill me-2"></i>{{ error }}
  </div>
</ng-template>

<div *ngIf="loading" class="text-center py-5">
  <div class="spinner-border text-primary mb-3" role="status">
    <span class="visually-hidden">Loading...</span>
  </div>
  <p class="fs-5 text-muted">Loading bank details...</p>
</div>
